<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="qmttsaloud.css"> </link>
</head>

<body>
  <div class="viewportDiv">
    <div id="myHeadline" class="div1">
      <div>
        <a href="javascript:prevChapter()" style="color:cyan;">&lArr;</a> 
      </div>
      <div class="select-wrapper">
        <select id="myChapter"> </select>
      </div>
      <div>
        <a href="javascript:nextChapter()" style="color:cyan;">&rArr;</a> 
      </div>
    </div>
    <div class="remainingDiv">
      <textarea name="myContent" id="myContent" readonly></textarea>
    </div>
    <div id="myFootline" class="div1">
      <div>
        <button id="showQR" popovertarget="setting"><img src="setting.svg" /></button>
      </div>
      <div>
        <button id="showQR" popovertarget="qrcode"><img src="qr_code.svg" /></button>
      </div>
      <div>
      <a href="javascript:speak()" style="color:red;">&#9654;</a>
      </div>
      <div>
       <a href="javascript:pauseResume()" id="myPauseCancel" style="color:red;">&#9208;</a>
      </div>
      <div id="myBook">
      紅樓夢滿紙荒唐言，一把辛酸淚。都云作者癡，誰解其中味？
      </div>
    </div>
    <div id="myFootline" class="div1">
Last updated : 14 Sep 2025
    </div>
  </div>
  <div id="qrcode" popover></div>
<script src="qrcode.js"></script> 
<script type="text/javascript">
let qw = window.innerWidth;
let qh = window.innerHeight;
const qq = (qw > qh) ? qh : qw;
var qrcode = new QRCode(document.getElementById("qrcode"), {
	text: decodeURI(window.location.href),
	width: qq * 0.8,
	height: qq * 0.8,
	colorDark : "#ffffff",
	colorLight : "#000000",
	correctLevel : QRCode.CorrectLevel.H
});
</script>  
<audio id='audio' src="1-hour-of-silence.mp3"></audio>
<div id="setting" popover>
   <div>
      <input type="checkbox" id="myAutoplay" name="autoplay" value="autoplay" checked>
      <label for="autoplay">Auto Play</label>
    </div>
    <div>
      <input type="range" min="0" max="10" value="2" name="myRange" id="myRange">
      <label for="myRange"><img src="textscale.svg" /></label>
    </div>
    <div>
      <input name="myRate" type="range" min="0.5" max="2" value="0.9" step="0.1" id="rate">
      <label for="myRate">Rate</label>
    </div>
    <div>
      <select id='myVoice'></select>
    </div>
    <div>
   <p> 
   <input type="checkbox" id="mySchedule" name="schedule" value="schedule" >
   <label for="schedule"><span id='sleep'>45</span> &rarr; 💤</label>
    <input type="range" min="5" max="75" value="45" step="5" id="stop">
   </p>
    </div>
 </div>
<script>
const stop = document.getElementById('stop');
stop.onchange = () => { document.getElementById('sleep').innerText = stop.value; }
let scheduleID = -1;
const mySchedule = document.getElementById('mySchedule');
mySchedule.onchange = function() {
  if (this.checked) { 
    scheduleStop(stop.value);
    } else {
    if (scheduleID == -1) return;
    clearTimeout(scheduleID);
    scheduleID = -1;
  }
}
function scheduleStop(duration) {
  scheduleID = setTimeout(() => { pauseResume(); mySchedule.checked = false; }, duration * 60 * 1000);
}
</script>
</body>
<script src="qmttsaloud.js"></script>
</html>
