<style>
html,body {
        height: 100%;
        margin: 0;
        padding: 0;
  background-color: black;
  color:cornsilk;
  font-size: 20px;
}
</style>
      <div id="mySleep"></div>
<video id='audio' width="100%" height="90%"></video>
<script type="module">
  import { Scheduler } from './sleep.mjs';
  new Scheduler('mySleep', 'audio');
</script>
<script>
const params =  (new URL(document.location)).searchParams;
const title =  params.get('title');
const name =  params.get('name');
const cttn = `currentTime${title}${name}`;
if (!localStorage.getItem(cttn)) { localStorage.setItem(cttn, "0.0") }
let currentTime = parseFloat(localStorage.getItem(cttn));
const innerVideo = a => `
  <source src="avs/${a}.mp3" type="audio/mp3">
  <track src="avs/${a}.vtt" kind="subtitles" srclang="zh" label="中文" default>
`;
const svg = a => `avs/${a}.svg`;
document.title = name;
const video = document.querySelector('video');
video.innerHTML = innerVideo(title);
video.poster = svg(title);
video.onclick=() => {
  if (video.paused) {
    video.play() 
  } else { 
    video.pause() 
  }
}
video.onplay = () => { 
  video.poster = ''; 
  video.currentTime = currentTime;

}
video.onpause = () => {
  currentTime = video.currentTime;
  localStorage.setItem(cttn, currentTime);  
  video.poster = svg(title) }
video.onended = () => { 
  currentTime = 0.0;
  video.play() }
</script>
