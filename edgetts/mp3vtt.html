<style>
html,body {
        height: 100%;
        margin: 0;
        padding: 0;
  background-color: black;
  color:cornsilk;
}
    .video-container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
#mySleep {
  position: absolute;
  margin: 5px;
  top: 0;
  left: 0;
  padding: 0;
  font-size: max(60px, 4.8vw);
  gap: 60px;
  text-align: justify;
  z-index: 10;
}
input[type="checkbox"] {
  transform: scale(4); /* Adjust the scale factor as needed */
  vertical-align: middle;           /* Aligns with the middle of the text */
  margin-top: -5px;                 /* Adjust this value to fine-tune vertical position */
  margin-right: 10px;
}
input[type="range"] {
  transform: scale(3); /* Adjust the scale factor as needed */
  vertical-align: middle;           /* Aligns with the middle of the text */
  margin-left: 120px;
}
</style>
<div class="video-container">
  <video id='audio' width="100%" height="1000%"></video>
  <div id="mySleep"></div>
</div>
<script type="module">
  import { Scheduler } from './sleep.mjs';
  new Scheduler('mySleep', 'audio');
</script>
<script>
const params =  (new URL(document.location)).searchParams;
const title =  params.get('title');
const name =  params.get('name');
const cttn = `currentTime${title}${name}`;
if (!localStorage.getItem(cttn)) { localStorage.setItem(cttn, "0.0") }
let currentTime = parseFloat(localStorage.getItem(cttn));
const innerVideo = a => `
  <source src="avs/${a}.mp3" type="audio/mp3">
  <track src="avs/${a}.vtt" kind="subtitles" srclang="zh" label="中文" default>
`;
const svg = a => `avs/${a}.svg`;
document.title = name;
const video = document.querySelector('video');
video.innerHTML = innerVideo(title);
video.poster = svg(title);
video.onclick=() => {
  if (video.paused) {
    video.play() 
  } else { 
    video.pause() 
  }
}
video.onplay = () => { 
  video.poster = ''; 
  video.controls = false;
  video.currentTime = currentTime;

}
video.onpause = () => {
  currentTime = video.currentTime;
  localStorage.setItem(cttn, currentTime);  
  video.poster = svg(title) 
  video.controls = true;
}
video.onended = () => { 
  currentTime = 0.0;
  video.play() }
video.onseeked = () => { currentTime = video.currentTime }
</script>
